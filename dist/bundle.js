(()=>{"use strict";var t={874:t=>{t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}},e={};function n(i){var s=e[i];if(void 0!==s)return s.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}(()=>{const t=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},e="propertychange",i=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function s(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if("function"==typeof n){for(let s=1;s<i;++s){const i=t[s];if(i===e)return s;if(i<e)return n(e,t[s-1],i)>0?s-1:s}return i-1}if(n>0){for(let n=1;n<i;++n)if(t[n]<e)return n-1;return i-1}if(n<0){for(let n=1;n<i;++n)if(t[n]<=e)return n;return i-1}for(let n=1;n<i;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return i-1}function r(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function a(){return!0}function h(){return!1}function l(){}function c(t){for(const e in t)delete t[e]}const d=class extends i{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(e){const n="string"==typeof e,i=n?e:e.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const o=n?new t(e):e;o.target||(o.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let h;i in r||(r[i]=0,a[i]=0),++r[i];for(let t=0,e=s.length;t<e;++t)if(h="handleEvent"in s[t]?s[t].handleEvent(o):s[t].call(this,o),!1===h||o.propagationStopped){h=!1;break}if(0==--r[i]){let t=a[i];for(delete a[i];t--;)this.removeEventListener(i,l);delete r[i]}return h}disposeInternal(){this.listeners_&&c(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=l,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}},u="change",g="contextmenu",_="click",p="keydown",m="keypress",f="touchmove",v="wheel";function y(t,e,n,i,s){if(i&&i!==t&&(n=n.bind(i)),s){const i=n;n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function C(t,e,n,i){return y(t,e,n,i,!0)}function x(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),c(t))}class E extends d{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(u)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=y(this,t[s],e);return i}return y(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let s=0;s<i;++s)n[s]=C(this,t[s],e)}else n=C(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)x(t[e]);else x(t)}(n);else if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}E.prototype.on,E.prototype.once,E.prototype.un;const w=E;function R(){throw new Error("Unimplemented abstract method.")}let b=0;function L(t){return t.ol_uid||(t.ol_uid=String(++b))}class M extends t{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}const I=class extends w{constructor(t){super(),this.on,this.once,this.un,L(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new M(i,t,n)),i=e,this.hasListener(i)&&this.dispatchEvent(new M(i,t,n))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],function(t){let e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,n)}}},P="add",T="remove",S="length";class A extends t{constructor(t,e,n){super(t),this.element=e,this.index=n}}const D=class extends I{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(S)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new A(P,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new A(T,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new A(T,n,t)),this.dispatchEvent(new A(P,e,t))}updateLength_(){this.set(S,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}};function N(t,e){if(!t)throw new Error(e)}function O(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function F(t,e,n,i,s,o,r,a){const h=Math.sin(o),l=Math.cos(o);return t[0]=i*l,t[1]=s*h,t[2]=-i*h,t[3]=s*l,t[4]=r*i*l-a*i*h+e,t[5]=r*s*h+a*s*l+n,t}new Array(6);const k={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function z(t,e,n){let i,s;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,s=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+s*s}function K(t,e){const n=t[0],i=t[1],s=t[2],o=t[3],r=e[0],a=e[1];let h=k.UNKNOWN;return r<n?h|=k.LEFT:r>s&&(h|=k.RIGHT),a<i?h|=k.BELOW:a>o&&(h|=k.ABOVE),h===k.UNKNOWN&&(h=k.INTERSECTING),h}function V(t,e,n,i,s){return s?(s[0]=t,s[1]=e,s[2]=n,s[3]=i,s):[t,e,n,i]}function Z(t){return V(1/0,1/0,-1/0,-1/0,t)}function G(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function j(t,e,n,i,s){for(;n<i;n+=s)B(t,e[n],e[n+1]);return t}function B(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function q(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function U(t,e,n,i,s){const[o,r,a,h,l,c,d,u]=function(t,e,n,i){const s=e*i[0]/2,o=e*i[1]/2,r=Math.cos(n),a=Math.sin(n),h=s*r,l=s*a,c=o*r,d=o*a,u=t[0],g=t[1];return[u-h+d,g-l-c,u-h-d,g-l+c,u+h-d,g+l+c,u+h+d,g+l-c,u-h+d,g-l-c]}(t,e,n,i);return V(Math.min(o,a,l,d),Math.min(r,h,c,u),Math.max(o,a,l,d),Math.max(r,h,c,u),s)}function H(t){return t[3]-t[1]}function X(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return Y(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):Z(i),i}function W(t){return t[2]-t[0]}function Y(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Q(t){return t[2]<t[0]||t[3]<t[1]}const $={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var J={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};J.max=J.whitepoint[2].D65,J.rgb=function(t,e){e=e||J.whitepoint[2].E;var n,i,s,o=t[0]/e[0],r=t[1]/e[1],a=t[2]/e[2];return i=-.96924363628087*o+1.87596750150772*r+.041555057407175*a,s=.055630079696993*o+-.20397695888897*r+1.056971514242878*a,n=(n=3.240969941904521*o+-1.537383177570093*r+-.498610760293*a)>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*=12.92,[255*(n=Math.min(Math.max(0,n),1)),255*(i=Math.min(Math.max(0,i),1)),255*(s=Math.min(Math.max(0,s),1))]},$.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,s=t[2]/255,o=.21263900587151*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.71516867876775*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.072192315360733*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92),r=.019330818715591*n+.11919477979462*i+.95053215224966*s;return[(.41239079926595*n+.35758433938387*i+.18048078840183*s)*(e=e||J.whitepoint[2].E)[0],o*e[1],r*e[2]]};const tt=J,et={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,s,o,r,a,h,l,c,d;return o=t[0],r=t[1],a=t[2],0===o?[0,0,0]:(e=e||"D65",n=n||2,i=r/(13*o)+4*(l=tt.whitepoint[n][e][0])/(l+15*(c=tt.whitepoint[n][e][1])+3*(d=tt.whitepoint[n][e][2]))||0,s=a/(13*o)+9*c/(l+15*c+3*d)||0,[9*(h=o>8?c*Math.pow((o+16)/116,3):c*o*.0011070564598794539)*i/(4*s)||0,h,h*(12-3*i-20*s)/(4*s)||0])}};tt.luv=function(t,e,n){var i,s,o,r,a,h,l,c,d,u,g;e=e||"D65",n=n||2,u=4*(l=tt.whitepoint[n][e][0])/(l+15*(c=tt.whitepoint[n][e][1])+3*(d=tt.whitepoint[n][e][2])),g=9*c/(l+15*c+3*d),i=4*(r=t[0])/(r+15*(a=t[1])+3*(h=t[2]))||0,s=9*a/(r+15*a+3*h)||0;var _=a/c;return[o=_<=.008856451679035631?903.2962962962961*_:116*Math.pow(_,1/3)-16,13*o*(i-u),13*o*(s-g)]},et.lchuv=function(t){var e=t[0],n=t[1],i=t[2],s=Math.sqrt(n*n+i*i),o=360*Math.atan2(i,n)/2/Math.PI;return o<0&&(o+=360),[e,s,o]},tt.lchuv=function(t){return et.lchuv(tt.luv(t))},n(874),$.hsl=function(t){var e,n,i=t[0]/255,s=t[1]/255,o=t[2]/255,r=Math.min(i,s,o),a=Math.max(i,s,o),h=a-r;return a===r?e=0:i===a?e=(s-o)/h:s===a?e=2+(o-i)/h:o===a&&(e=4+(i-s)/h),(e=Math.min(60*e,360))<0&&(e+=360),n=(r+a)/2,[e,100*(a===r?0:n<=.5?h/(a+r):h/(2-a-r)),100*n]};function nt(t,e,n){return e+":"+t+":"+(n?function(t){return"string"==typeof t?t:function(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];return i!=(0|i)&&(i=i+.5|0),"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}(t)}(n):"null")}const it=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,n){const i=nt(t,e,n);return i in this.cache_?this.cache_[i]:null}set(t,e,n,i){const s=nt(t,e,n);this.cache_[s]=i,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}},st="opacity",ot="visible",rt="extent",at="zIndex",ht="maxResolution",lt="minResolution",ct="maxZoom",dt="minZoom",ut="source";function gt(t,e,n){return Math.min(Math.max(t,e),n)}function _t(t,e,n,i,s,o){const r=s-n,a=o-i;if(0!==r||0!==a){const h=((t-n)*r+(e-i)*a)/(r*r+a*a);h>1?(n=s,i=o):h>0&&(n+=r*h,i+=a*h)}return pt(t,e,n,i)}function pt(t,e,n,i){const s=n-t,o=i-e;return s*s+o*o}function mt(t,e){const n=t%e;return n*e<0?n+e:n}function ft(t,e,n){return t+n*(e-t)}const vt=class extends I{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[st]=void 0!==t.opacity?t.opacity:1,N("number"==typeof e[st],"Layer opacity must be a number"),e[ot]=void 0===t.visible||t.visible,e[at]=t.zIndex,e[ht]=void 0!==t.maxResolution?t.maxResolution:1/0,e[lt]=void 0!==t.minResolution?t.minResolution:0,e[dt]=void 0!==t.minZoom?t.minZoom:-1/0,e[ct]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=gt(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return R()}getLayerStatesArray(t){return R()}getExtent(){return this.get(rt)}getMaxResolution(){return this.get(ht)}getMinResolution(){return this.get(lt)}getMinZoom(){return this.get(dt)}getMaxZoom(){return this.get(ct)}getOpacity(){return this.get(st)}getSourceState(){return R()}getVisible(){return this.get(ot)}getZIndex(){return this.get(at)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(rt,t)}setMaxResolution(t){this.set(ht,t)}setMinResolution(t){this.set(lt,t)}setMaxZoom(t){this.set(ct,t)}setMinZoom(t){this.set(dt,t)}setOpacity(t){N("number"==typeof t,"Layer opacity must be a number"),this.set(st,t)}setVisible(t){this.set(ot,t)}setZIndex(t){this.set(at,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},yt="precompose",Ct="rendercomplete",xt={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Et={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},wt=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Et[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Rt=6378137,bt=Math.PI*Rt,Lt=[-bt,-bt,bt,bt],Mt=[-180,-85,180,85],It=Rt*Math.log(Math.tan(Math.PI/2));class Pt extends wt{constructor(t){super({code:t,units:"m",extent:Lt,global:!0,worldExtent:Mt,getPointResolution:function(t,e){return t/Math.cosh(e[1]/Rt)}})}}const Tt=[new Pt("EPSG:3857"),new Pt("EPSG:102100"),new Pt("EPSG:102113"),new Pt("EPSG:900913"),new Pt("http://www.opengis.net/def/crs/EPSG/0/3857"),new Pt("http://www.opengis.net/gml/srs/epsg.xml#3857")];const St=[-180,-90,180,90],At=6378137*Math.PI/180;class Dt extends wt{constructor(t,e){super({code:t,units:"degrees",extent:St,axisOrientation:e,global:!0,metersPerUnit:At,worldExtent:St})}}const Nt=[new Dt("CRS:84"),new Dt("EPSG:4326","neu"),new Dt("urn:ogc:def:crs:OGC:1.3:CRS84"),new Dt("urn:ogc:def:crs:OGC:2:84"),new Dt("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Dt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Dt("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Ot={},Ft={};function kt(t,e,n){const i=t.getCode(),s=e.getCode();i in Ft||(Ft[i]={}),Ft[i][s]=n}function zt(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function Kt(t,e){const n=Math.cos(e),i=Math.sin(e),s=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=s,t[1]=o,t}const Vt={info:1,warn:2,error:3,none:4};let Zt=Vt.info;function Gt(...t){Zt>Vt.warn||console.warn(...t)}let jt=!0;function Bt(t,e){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function qt(t,e){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function Ut(t){!function(t,e){Ot[t]=e}(t.getCode(),t),kt(t,t,Bt)}function Ht(t){return"string"==typeof t?Ot[e=t]||Ot[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Xt(t){!function(t){t.forEach(Ut)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&kt(e,t,Bt)}))}))}function Wt(t,e){return t?"string"==typeof t?Ht(t):t:Ht(e)}function Yt(t,e){return function(t,e){let n=function(t,e){let n;return t in Ft&&e in Ft[t]&&(n=Ft[t][e]),n}(t.getCode(),e.getCode());return n||(n=qt),n}(Ht(t),Ht(e))}let Qt=null;function $t(){return Qt}function Jt(t,e){return t}function te(t,e){return jt&&!zt(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(jt=!1,Gt("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function ee(t,e){return t}var ne,ie,se;function oe(t,e,n){return function(i,s,o,r,a){if(!i)return;if(!s&&!e)return i;const h=e?0:o[0]*s,l=e?0:o[1]*s,c=a?a[0]:0,d=a?a[1]:0;let u=t[0]+h/2+c,g=t[2]-h/2+c,_=t[1]+l/2+d,p=t[3]-l/2+d;u>g&&(u=(g+u)/2,g=u),_>p&&(_=(p+_)/2,p=_);let m=gt(i[0],u,g),f=gt(i[1],_,p);if(r&&n&&s){const t=30*s;m+=-t*Math.log(1+Math.max(0,u-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-g)/t),f+=-t*Math.log(1+Math.max(0,_-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-p)/t)}return[m,f]}}function re(t){return t}function ae(t,e,n,i){const s=W(e)/n[0],o=H(e)/n[1];return i?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function he(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),gt(i,n/2,2*e)}function le(t,e,n,i,s){return n=void 0===n||n,function(o,r,a,h){if(void 0!==o){const r=i?ae(t,i,a,s):t;return n&&h?he(o,r,e):gt(o,e,r)}}}function ce(t){if(void 0!==t)return 0}function de(t){if(void 0!==t)return t}function ue(t){return 1-function(t){return Math.pow(t,3)}(1-t)}function ge(t){return 3*t*t-2*t*t*t}function _e(t){return t}Xt(Tt),Xt(Nt),ne=Tt,ie=function(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let s=0;s<i;s+=n){e[s]=bt*t[s]/180;let n=Rt*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));n>It?n=It:n<-It&&(n=-It),e[s+1]=n}return e},se=function(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let s=0;s<i;s+=n)e[s]=180*t[s]/bt,e[s+1]=360*Math.atan(Math.exp(t[s+1]/Rt))/Math.PI-90;return e},Nt.forEach((function(t){ne.forEach((function(e){kt(t,e,ie),kt(e,t,se)}))}));const pe=[1,0,0,1,0,0],me=class extends I{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(t){let e,n,i,s=!1;return function(){const o=Array.prototype.slice.call(arguments);return s&&this===i&&r(o,n)||(s=!0,i=this,n=o,e=t.apply(this,arguments)),e}}(((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return R()}closestPointXY(t,e,n,i){return R()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return R()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Z(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){R()}scale(t,e,n){R()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return R()}getType(){return R()}applyTransform(t){R()}intersectsExtent(t){return R()}translate(t,e){R()}transform(t,e){const n=Ht(t),i="tile-pixels"==n.getUnits()?function(t,i,s){const o=n.getExtent(),r=n.getWorldExtent(),a=H(r)/H(o);return F(pe,r[0],r[3],a,-a,0,0,0),function(t,e,n,i,s,o){o=o||[];let r=0;for(let e=0;e<n;e+=i){const n=t[e],i=t[e+1];o[r++]=s[0]*n+s[2]*i+s[4],o[r++]=s[1]*n+s[3]*i+s[5]}o&&o.length!=r&&(o.length=r)}(t,0,t.length,s,pe,i),Yt(n,e)(t,i,s)}:Yt(n,e);return this.applyTransform(i),this}};function fe(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const ve=class extends me{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return e=this.flatCoordinates,0,n=this.flatCoordinates.length,i=this.stride,j(Z(t),e,0,n,i);var e,n,i}getCoordinates(){return R()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=fe(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){R()}setLayout(t,e,n){let i;if(t)i=fe(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=function(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,s,o,r){r=r||[];const a=Math.cos(s),h=Math.sin(s),l=o[0],c=o[1];let d=0;for(let e=0;e<n;e+=i){const n=t[e]-l,s=t[e+1]-c;r[d++]=l+n*a-s*h,r[d++]=c+n*h+s*a;for(let n=e+2;n<e+i;++n)r[d++]=t[n]}r&&r.length!=d&&(r.length=d)}(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=q(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();!function(t,e,n,i,s,o,r,a){a=a||[];const h=r[0],l=r[1];let c=0;for(let e=0;e<n;e+=i){const n=t[e]-h,r=t[e+1]-l;a[c++]=h+s*n,a[c++]=l+o*r;for(let n=e+2;n<e+i;++n)a[c++]=t[n]}a&&a.length!=c&&(a.length=c)}(i,0,i.length,s,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();!function(t,e,n,i,s,o,r){r=r||[];let a=0;for(let e=0;e<n;e+=i){r[a++]=t[e]+s,r[a++]=t[e+1]+o;for(let n=e+2;n<e+i;++n)r[a++]=t[n]}r&&r.length!=a&&(r.length=a)}(n,0,n.length,i,t,e,n),this.changed()}}};function ye(t,e,n,i,s,o,r){const a=t[e],h=t[e+1],l=t[n]-a,c=t[n+1]-h;let d;if(0===l&&0===c)d=e;else{const u=((s-a)*l+(o-h)*c)/(l*l+c*c);if(u>1)d=n;else{if(u>0){for(let s=0;s<i;++s)r[s]=ft(t[e+s],t[n+s],u);return void(r.length=i)}d=e}}for(let e=0;e<i;++e)r[e]=t[d+e];r.length=i}function Ce(t,e,n,i,s){let o=t[e],r=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=pt(o,r,n,i);a>s&&(s=a),o=n,r=i}return s}function xe(t,e,n,i,s,o,r,a,h,l,c){if(e==n)return l;let d,u;if(0===s){if(u=pt(r,a,t[e],t[e+1]),u<l){for(d=0;d<i;++d)h[d]=t[e+d];return h.length=i,u}return l}c=c||[NaN,NaN];let g=e+i;for(;g<n;)if(ye(t,g-i,g,i,r,a,c),u=pt(r,a,c[0],c[1]),u<l){for(l=u,d=0;d<i;++d)h[d]=c[d];h.length=i,g+=i}else g+=i*Math.max((Math.sqrt(u)-Math.sqrt(l))/s|0,1);if(o&&(ye(t,n-i,e,i,r,a,c),u=pt(r,a,c[0],c[1]),u<l)){for(l=u,d=0;d<i;++d)h[d]=c[d];h.length=i}return l}function Ee(t,e,n,i){for(let s=0,o=n.length;s<o;++s){const o=n[s];for(let n=0;n<i;++n)t[e++]=o[n]}return e}function we(t,e){return e*Math.round(t/e)}function Re(t,e,n,i,s,o,r){if(e==n)return r;let a,h,l=we(t[e],s),c=we(t[e+1],s);e+=i,o[r++]=l,o[r++]=c;do{if(a=we(t[e],s),h=we(t[e+1],s),(e+=i)==n)return o[r++]=a,o[r++]=h,r}while(a==l&&h==c);for(;e<n;){const n=we(t[e],s),d=we(t[e+1],s);if(e+=i,n==a&&d==h)continue;const u=a-l,g=h-c,_=n-l,p=d-c;u*p==g*_&&(u<0&&_<u||u==_||u>0&&_>u)&&(g<0&&p<g||g==p||g>0&&p>g)?(a=n,h=d):(o[r++]=a,o[r++]=h,l=a,c=h,a=n,h=d)}return o[r++]=a,o[r++]=h,r}function be(t,e,n,i,s){s=void 0!==s?s:[];let o=0;for(let r=e;r<n;r+=i)s[o++]=t.slice(r,r+i);return s.length=o,s}function Le(t,e,n,i){let s=0,o=t[n-i],r=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];s+=r*n-o*i,o=n,r=i}return s/2}class Me extends ve{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Me(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<z(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return Le(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return be(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=function(t,e,n,i,s,o,r){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)o[r++]=t[e],o[r++]=t[e+1];return r}const h=new Array(a);h[0]=1,h[a-1]=1;const l=[e,n-i];let c=0;for(;l.length>0;){const n=l.pop(),o=l.pop();let r=0;const a=t[o],d=t[o+1],u=t[n],g=t[n+1];for(let e=o+i;e<n;e+=i){const n=_t(t[e],t[e+1],a,d,u,g);n>r&&(c=e,r=n)}r>s&&(h[(c-e)/i]=1,o+i<c&&l.push(o,c),c+i<n&&l.push(c,n))}for(let n=0;n<a;++n)h[n]&&(o[r++]=t[e+n*i],o[r++]=t[e+n*i+1]);return r}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Me(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ee(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ie=Me;class Pe extends ve{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Pe(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const s=this.flatCoordinates,o=pt(t,e,s[0],s[1]);if(o<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=s[e];return n.length=t,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return function(t,e){const n=t[0],i=t[1];return V(n,i,n,i,e)}(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return function(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,i){for(let i=0,s=n.length;i<s;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}const Te=Pe;function Se(t,e,n,i,s){const o=function(t,e){let n;return n=e(function(t){return[t[0],t[1]]}(t)),n||(n=e(function(t){return[t[2],t[1]]}(t)),n||(n=e(function(t){return[t[2],t[3]]}(t)),n||(n=e(function(t){return[t[0],t[3]]}(t)),n||!1)))}(s,(function(s){return!Ae(t,e,n,i,s[0],s[1])}));return!o}function Ae(t,e,n,i,s,o){let r=0,a=t[n-i],h=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];h<=o?i>o&&(n-a)*(o-h)-(s-a)*(i-h)>0&&r++:i<=o&&(n-a)*(o-h)-(s-a)*(i-h)<0&&r--,a=n,h=i}return 0!==r}function De(t,e,n,i,s,o){if(0===n.length)return!1;if(!Ae(t,e,n[0],i,s,o))return!1;for(let e=1,r=n.length;e<r;++e)if(Ae(t,n[e-1],n[e],i,s,o))return!1;return!0}function Ne(t,e,n,i,s){const o=j([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!Y(s,o)&&(a=o,(r=s)[0]<=a[0]&&a[2]<=r[2]&&r[1]<=a[1]&&a[3]<=r[3]||o[0]>=s[0]&&o[2]<=s[2]||o[1]>=s[1]&&o[3]<=s[3]||function(t,e,n,i,o){let r;for(e+=i;e<n;e+=i)if(a=t.slice(e-i,e),h=t.slice(e,e+i),r=function(t,e,n){let i=!1;const s=K(t,e),o=K(t,n);if(s===k.INTERSECTING||o===k.INTERSECTING)i=!0;else{const r=t[0],a=t[1],h=t[2],l=t[3],c=e[0],d=e[1],u=n[0],g=n[1],_=(g-d)/(u-c);let p,m;o&k.ABOVE&&!(s&k.ABOVE)&&(p=u-(g-l)/_,i=p>=r&&p<=h),i||!(o&k.RIGHT)||s&k.RIGHT||(m=g-(u-h)*_,i=m>=a&&m<=l),i||!(o&k.BELOW)||s&k.BELOW||(p=u-(g-a)/_,i=p>=r&&p<=h),i||!(o&k.LEFT)||s&k.LEFT||(m=g-(u-r)*_,i=m>=a&&m<=l)}return i}(s,a,h),r)return r;var a,h;return!1}(t,e,n,i));var r,a}function Oe(t,e,n,i){for(;e<n-i;){for(let s=0;s<i;++s){const o=t[e+s];t[e+s]=t[n-i+s],t[n-i+s]=o}e+=i,n-=i}}function Fe(t,e,n,i){let s=0,o=t[n-i],r=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];s+=(n-o)*(i+r),o=n,r=i}return 0===s?void 0:s>0}function ke(t,e,n,i,s){s=void 0!==s&&s;for(let o=0,r=n.length;o<r;++o){const r=n[o],a=Fe(t,e,r,i);(0===o?s&&a||!s&&!a:s&&!a||!s&&a)&&Oe(t,e,r,i),e=r}return e}class ze extends ve{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?function(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let e=0;e<i;e++)t[t.length]=n[e]}(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ze(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<z(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,i,s){for(let o=0,r=n.length;o<r;++o){const r=n[o];s=Ce(t,e,r,i,s),e=r}return s}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,i,s,o,r,a,h,l,c){c=c||[NaN,NaN];for(let d=0,u=n.length;d<u;++d){const u=n[d];l=xe(t,e,u,i,s,o,r,a,h,l,c),e=u}return l}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return De(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return function(t,e,n,i){let s=0;for(let o=0,r=n.length;o<r;++o){const r=n[o];s+=Le(t,e,r,i),e=r}return s}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),ke(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,function(t,e,n,i,s){s=void 0!==s?s:[];let o=0;for(let r=0,a=n.length;r<a;++r){const a=n[r];s[o++]=be(t,e,a,i,s[o]),e=a}return s.length=o,s}(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=q(this.getExtent());this.flatInteriorPoint_=function(t,e,n,i,o,r,a){let h,l,c,d,u,g,_;const p=o[r+1],m=[];for(let s=0,o=n.length;s<o;++s){const o=n[s];for(d=t[o-i],g=t[o-i+1],h=e;h<o;h+=i)u=t[h],_=t[h+1],(p<=g&&_<=p||g<=p&&p<=_)&&(c=(p-g)/(_-g)*(u-d)+d,m.push(c)),d=u,g=_}let f=NaN,v=-1/0;for(m.sort(s),d=m[0],h=1,l=m.length;h<l;++h){u=m[h];const s=Math.abs(u-d);s>v&&(c=(d+u)/2,De(t,e,n,i,c,p)&&(f=c,v=s)),d=u}return isNaN(f)&&(f=o[r]),a?(a.push(f,p,v),a):[f,p,v]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Te(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Ie(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let s=0;for(let o=0,r=n.length;o<r;++o){const r=n[o],a=new Ie(e.slice(s,r),t);i.push(a),s=r}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,n,i,s){s=void 0!==s&&s;for(let o=0,r=n.length;o<r;++o){const r=n[o],a=Fe(t,e,r,i);if(0===o){if(s&&a||!s&&!a)return!1}else if(s&&!a||!s&&a)return!1;e=r}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ke(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=function(t,e,n,i,s,o,r,a){for(let h=0,l=n.length;h<l;++h){const l=n[h];r=Re(t,e,l,i,s,o,r),a.push(r),e=l}return r}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new ze(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return function(t,e,n,i,s){if(!function(t,e,n,i,s){return!!(Ne(t,e,n,i,s)||Ae(t,e,n,i,s[0],s[1])||Ae(t,e,n,i,s[0],s[3])||Ae(t,e,n,i,s[2],s[1])||Ae(t,e,n,i,s[2],s[3]))}(t,e,n[0],i,s))return!1;if(1===n.length)return!0;for(let e=1,o=n.length;e<o;++e)if(Se(t,n[e-1],n[e],i,s)&&!Ne(t,n[e-1],n[e],i,s))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=function(t,e,n,i,s){s=s||[];let o=0;for(let r=0,a=n.length;r<a;++r){const a=Ee(t,e,n[r],i);s[o++]=a,e=a}return s.length=o,s}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}const Ke=ze;function Ve(t){if(Q(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],s=t[3],o=[e,n,e,s,i,s,i,n,e,n];return new ze(o,"XY",[o.length])}function Ze(t,e){setTimeout((function(){t(e)}),0)}function Ge(t){return!(t.sourceCenter&&t.targetCenter&&!zt(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function je(t,e,n,i,s){const o=Math.cos(-s);let r=Math.sin(-s),a=t[0]*o-t[1]*r,h=t[1]*o+t[0]*r;return a+=(e[0]/2-n[0])*i,h+=(n[1]-e[1]/2)*i,r=-r,[a*o-h*r,h*o+a*r]}const Be=class extends I{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Wt(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&function(t){jt=!(void 0===t||t)}(),t.center&&(t.center=te(t.center,this.projection_)),t.extent&&(t.extent=ee(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in xt)delete e[t];this.setProperties(e,!0);const n=function(t){let e,n,i;let s=void 0!==t.minZoom?t.minZoom:0,r=void 0!==t.maxZoom?t.maxZoom:28;const a=void 0!==t.zoomFactor?t.zoomFactor:2,h=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,d=Wt(t.projection,"EPSG:3857"),u=d.getExtent();let g=t.constrainOnlyCenter,_=t.extent;if(h||_||!d.isGlobal()||(g=!1,_=u),void 0!==t.resolutions){const a=t.resolutions;n=a[s],i=void 0!==a[r]?a[r]:a[a.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(s,r,a,h){if(void 0!==s){const l=t[0],c=t[t.length-1],d=n?ae(l,n,a,i):l;if(h)return e?he(s,d,c):gt(s,c,d);const u=Math.min(d,s),g=Math.floor(o(t,u,r));return t[g]>d&&g<t.length-1?t[g+1]:t[g]}}}(a,l,!g&&_,c):le(n,i,l,!g&&_,c)}else{const o=(u?Math.max(W(u),H(u)):360*Et.degrees/d.getMetersPerUnit())/256/Math.pow(2,0),h=o/Math.pow(2,28);n=t.maxResolution,void 0!==n?s=0:n=o/Math.pow(a,s),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,r):o/Math.pow(a,r):h),r=s+Math.floor(Math.log(n/i)/Math.log(a)),i=n/Math.pow(a,r-s),e=t.constrainResolution?function(t,e,n,i,s,o){return i=void 0===i||i,n=void 0!==n?n:0,function(r,a,h,l){if(void 0!==r){const c=s?ae(e,s,h,o):e;if(l)return i?he(r,c,n):gt(r,n,c);const d=1e-9,u=Math.ceil(Math.log(e/c)/Math.log(t)-d),g=-a*(.5-d)+.5,_=Math.min(c,r),p=Math.floor(Math.log(e/_)/Math.log(t)+g),m=Math.max(u,p);return gt(e/Math.pow(t,m),n,c)}}}(a,n,i,l,!g&&_,c):le(n,i,l,!g&&_,c)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:s,zoomFactor:a}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return oe(t.extent,t.constrainOnlyCenter,e)}const e=Wt(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,oe(t,!1,!1)}return re}(t),s=n.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?function(t){const e=void 0===t?5*Math.PI/180:t;return function(t,n){return n||void 0===t?t:Math.abs(t)<=e?0:t}}():!1===e?de:"number"==typeof e?function(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(e):de}return ce}(t);this.constraints_={center:i,resolution:s,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(i[3]-e[3]+e[1]-i[1]),r=s/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+o,n[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let n=arguments[t];n.center&&(n=Object.assign({},n),n.center=te(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=te(n.anchor,this.getProjection())),e[t]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&Ze(e,!0));let s=Date.now(),o=this.targetCenter_.slice(),r=this.targetResolution_,a=this.targetRotation_;const h=[];for(;i<n;++i){const t=arguments[i],n={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||ge,callback:e};if(t.center&&(n.sourceCenter=o,n.targetCenter=t.center.slice(),o=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=r,n.targetResolution=this.getResolutionForZoom(t.zoom),r=n.targetResolution):t.resolution&&(n.sourceResolution=r,n.targetResolution=t.resolution,r=n.targetResolution),void 0!==t.rotation){n.sourceRotation=a;const e=mt(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=a+e,a=n.targetRotation}Ge(n)?n.complete=!0:s+=n.duration,h.push(n)}this.animations_.push(h),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let t;this.setHint(0,-this.hints_[0]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&Ze(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let s=!0;for(let n=0,o=i.length;n<o;++n){const o=i[n];if(o.complete)continue;const r=t-o.start;let a=o.duration>0?r/o.duration:1;a>=1?(o.complete=!0,a=1):s=!1;const h=o.easing(a);if(o.sourceCenter){const t=o.sourceCenter[0],e=o.sourceCenter[1],n=o.targetCenter[0],i=o.targetCenter[1];this.nextCenter_=o.targetCenter;const s=t+h*(n-t),r=e+h*(i-e);this.targetCenter_=[s,r]}if(o.sourceResolution&&o.targetResolution){const t=1===h?o.targetResolution:o.sourceResolution+h*(o.targetResolution-o.sourceResolution);if(o.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const t=1===h?mt(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+h*(o.targetRotation-o.sourceRotation);if(o.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!o.complete)break}if(s){this.animations_[n]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&Ze(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();var s,o;return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],Kt(n,t-this.getRotation()),o=e,(s=n)[0]+=+o[0],s[1]+=+o[1]),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),s=this.getResolution();return void 0!==i&&void 0!==s&&(n=[e[0]-t*(e[0]-i[0])/s,e[1]-t*(e[1]-i[1])/s]),n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?Jt(t,this.getProjection()):t}getCenterInternal(){return this.get(xt.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return e=this.calculateExtentInternal(t),this.getProjection(),e;var e}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();N(e,"The view center is not defined");const n=this.getResolution();N(void 0!==n,"The view resolution is not defined");const i=this.getRotation();return N(void 0!==i,"The view rotation is not defined"),U(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(xt.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(ee(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=W(t)/e[0],i=H(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(xt.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const t=this.getViewportSizeMinusPadding_();i=je(i,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const s=o(this.resolutions_,t,1);i=s,e=this.resolutions_[s],n=s==this.resolutions_.length-1?2:e/this.resolutions_[s+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=gt(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,gt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(N(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t))N(!Q(t),"Cannot fit empty extent provided as `geometry`"),n=Ve(ee(t,this.getProjection()));else if("Circle"===t.getType()){const e=ee(t.getExtent(),this.getProjection());n=Ve(e),n.rotate(this.getRotation(),q(e))}else{const e=$t();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let r=1/0,a=1/0,h=-1/0,l=-1/0;for(let t=0,e=s.length;t<e;t+=o){const e=s[t]*n-s[t+1]*i,o=s[t]*i+s[t+1]*n;r=Math.min(r,e),a=Math.min(a,o),h=Math.max(h,e),l=Math.max(l,o)}return[r,a,h,l]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(r,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,s?0:1);const h=this.getRotation(),c=Math.sin(h),d=Math.cos(h),u=q(r);u[0]+=(i[1]-i[3])/2*a,u[1]+=(i[0]-i[2])/2*a;const g=u[0]*d-u[1]*c,_=u[1]*d+u[0]*c,p=this.getConstrainedCenter([g,_],a),m=e.callback?e.callback:l;void 0!==e.duration?this.animateInternal({resolution:a,center:p,duration:e.duration,easing:e.easing},m):(this.targetResolution_=a,this.targetCenter_=p,this.applyTargetState_(!1,!0),Ze(m,!0))}centerOn(t,e,n){this.centerOnInternal(te(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(je(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let s;const o=this.padding_;if(o&&t){const r=this.getViewportSizeMinusPadding_(-n),a=je(t,i,[r[0]/2+o[3],r[1]/2+o[0]],e,n);s=[t[0]-a[0],t[1]-a[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=Jt(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&te(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=te(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?te(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,s,n),r=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,i,s));this.get(xt.ROTATION)!==i&&this.set(xt.ROTATION,i),this.get(xt.RESOLUTION)!==o&&(this.set(xt.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),r&&this.get(xt.CENTER)&&zt(this.get(xt.CENTER),r)||this.set(xt.CENTER,r),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),r=this.constraints_.resolution(this.targetResolution_,i,o),a=this.constraints_.center(this.targetCenter_,r,o,!1,this.calculateCenterShift(this.targetCenter_,r,s,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=s,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===s&&this.getCenterInternal()&&zt(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:a,resolution:r,duration:t,easing:ue,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(t,e,n){n=n&&te(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}};function qe(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}const Ue=class extends vt{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(ut,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(ut)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(x(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=y(t,u,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const n=this.getMapInternal();let i;!t&&n&&(t=n.getView()),e=t instanceof Be?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const s=this.getExtent();return qe(i,e.viewState)&&(!s||Y(s,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];let i=e(t instanceof Be?t.getViewStateAndExtent():t);return Array.isArray(i)||(i=[i]),i}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set("map",t)}getMapInternal(){return this.get("map")}setMap(t){this.mapPrecomposeKey_&&(x(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(x(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=y(t,yt,(function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);N(!e.some((function(t){return t.layer===n.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(n)}),this),this.mapRenderKey_=y(this,u,t.render,t),this.changed())}setSource(t){this.set(ut,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function He(t,e){it.expire()}const Xe=class extends i{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){R()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;F(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),function(t,e){const n=(i=e)[0]*i[3]-i[1]*i[2];var i;N(0!==n,"Transformation matrix cannot be inverted");const s=e[0],o=e[1],r=e[2],a=e[3],h=e[4],l=e[5];t[0]=a/n,t[1]=-o/n,t[2]=-r/n,t[3]=s/n,t[4]=(r*l-a*h)/n,t[5]=-(s*l-o*h)/n}(i,n)}forEachFeatureAtCoordinate(t,e,n,i,s,o,r,a){let h;const l=e.viewState;function c(t,e,n,i){return s.call(o,e,t?n:null,i)}const d=l.projection,u=function(t,e){if(e.canWrapX()){const n=W(e.getExtent()),i=function(t,e,n){const i=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||W(i),s=Math.floor((t[0]-i[0])/n)),s}(t,e,n);i&&(t[0]-=i*n)}return t}(t.slice(),d),g=[[0,0]];if(d.canWrapX()&&i){const t=W(d.getExtent());g.push([-t,0],[t,0])}const _=e.layerStatesArray,p=_.length,m=[],f=[];for(let i=0;i<g.length;i++)for(let s=p-1;s>=0;--s){const o=_[s],d=o.layer;if(d.hasRenderer()&&qe(o,l)&&r.call(a,d)){const s=d.getRenderer(),r=d.getSource();if(s&&r){const a=r.getWrapX()?u:t,l=c.bind(null,o.managed);f[0]=a[0]+g[i][0],f[1]=a[1]+g[i][1],h=s.forEachFeatureAtCoordinate(f,e,n,l,m)}if(h)return h}}if(0===m.length)return;const v=1/m.length;return m.forEach(((t,e)=>t.distanceSq+=e*v)),m.sort(((t,e)=>t.distanceSq-e.distanceSq)),m.some((t=>h=t.callback(t.feature,t.layer,t.geometry))),h}hasFeatureAtCoordinate(t,e,n,i,s,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,a,this,s,o)}getMap(){return this.map_}renderFrame(t){R()}flushDeclutterItems(t){}scheduleExpireIconCache(t){it.canExpireCache()&&t.postRenderFunctions.push(He)}},We=class extends t{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}},Ye="ol-hidden",Qe="ol-unselectable",$e="ol-control",Je="ol-collapsed",tn=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),"undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():""),en=tn.includes("firefox"),nn=(tn.includes("safari")&&!tn.includes("chrom")&&(tn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(tn)),tn.includes("webkit")&&!tn.includes("edge")),sn=tn.includes("macintosh"),on="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,rn=("undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),"undefined"!=typeof Image&&Image.prototype.decode,function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}());function an(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function hn(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}const ln=new I;!function(){const t=["monospace","serif"];t.length}();const cn=class extends Xe{constructor(t){super(t),this.fontChangeListenerKey_=y(ln,e,t.redrawText.bind(t)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=Qe+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new We(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){x(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(yt,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;const i=this.declutterLayers_;i.length=0;let s=null;for(let o=0,r=e.length;o<r;++o){const r=e[o];t.layerIndex=o;const a=r.layer,h=a.getSourceState();if(!qe(r,n)||"ready"!=h&&"undefined"!=h){a.unrender();continue}const l=a.render(t,s);l&&(l!==s&&(this.children_.push(l),s=l),"getDeclutter"in a&&i.push(a))}this.flushDeclutterItems(t),function(t,e){const n=t.childNodes;for(let i=0;;++i){const s=n[i],o=e[i];if(!s&&!o)break;s!==o&&(s?o?t.insertBefore(o,s):(t.removeChild(s),--i):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const e=this.declutterLayers_;for(let n=e.length-1;n>=0;--n)e[n].renderDeclutter(t);e.length=0}};class dn extends t{constructor(t,e){super(t),this.layer=e}}const un="layers";class gn extends vt{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(un,this.handleLayersChanged_),n?Array.isArray(n)?n=new D(n.slice(),{unique:!0}):N("function"==typeof n.getArray,"Expected `layers` to be an array or a `Collection`"):n=new D(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(x),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(y(t,P,this.handleLayersAdd_,this),y(t,T,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(x);c(this.listenerKeys_);const e=t.getArray();for(let t=0,n=e.length;t<n;t++){const n=e[t];this.registerLayerListeners_(n),this.dispatchEvent(new dn("addlayer",n))}this.changed()}registerLayerListeners_(t){const n=[y(t,e,this.handleLayerChange_,this),y(t,u,this.handleLayerChange_,this)];t instanceof gn&&n.push(y(t,"addlayer",this.handleLayerGroupAdd_,this),y(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[L(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new dn("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new dn("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new dn("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=L(e);this.listenerKeys_[n].forEach(x),delete this.listenerKeys_[n],this.dispatchEvent(new dn("removelayer",e)),this.changed()}getLayers(){return this.get(un)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new dn("removelayer",t[e]))}this.set(un,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let s=i.zIndex;t||void 0!==i.zIndex||(s=0);for(let t=n,o=e.length;t<o;t++){const n=e[t];n.opacity*=i.opacity,n.visible=n.visible&&i.visible,n.maxResolution=Math.min(n.maxResolution,i.maxResolution),n.minResolution=Math.max(n.minResolution,i.minResolution),n.minZoom=Math.max(n.minZoom,i.minZoom),n.maxZoom=Math.min(n.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==n.extent?n.extent=X(n.extent,i.extent):n.extent=i.extent),void 0===n.zIndex&&(n.zIndex=s)}return e}getSourceState(){return"ready"}}const _n=gn,pn=class extends t{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}},mn=class extends pn{constructor(t,e,n,i,s,o){super(t,e,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},fn={SINGLECLICK:"singleclick",CLICK:_,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},vn="pointerdown",yn=class extends d{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=y(n,vn,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=y(n,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(f,this.boundHandleTouchMove_,!!rn&&{passive:!1})}emulateClick_(t){let e=new mn(fn.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new mn(fn.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new mn(fn.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==fn.POINTERUP||e.type==fn.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=fn.POINTERDOWN&&e.type!=fn.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new mn(fn.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(x),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new mn(fn.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(y(t,fn.POINTERMOVE,this.handlePointerMove_,this),y(t,fn.POINTERUP,this.handlePointerUp_,this),y(this.element_,fn.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(y(this.element_.getRootNode(),fn.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new mn(fn.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new mn(fn.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(x(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(f,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(x(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(x),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Cn="postrender",xn="loadstart",En="loadend",wn="layergroup",Rn="size",bn="target",Ln="view",Mn=1/0,In=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,c(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){N(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=Mn&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,s=e[t],o=n[t],r=t;for(;t<i>>1;){const s=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),r=o<i&&n[o]<n[s]?o:s;e[t]=e[r],n[t]=n[r],t=r}e[t]=s,n[t]=o,this.siftDown_(r,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,s=n[e],o=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>o))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=s,i[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const s=e.length;let o,r,a;for(r=0;r<s;++r)o=e[r],a=t(o),a==Mn?delete this.queuedElements_[this.keyFunction_(o)]:(n[i]=a,e[i++]=o);e.length=i,n.length=i,this.heapify_()}},Pn=class extends In{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(u,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(2===n||3===n||4===n){3!==n&&e.removeEventListener(u,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,s,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=this.dequeue()[0],s=i.getKey(),n=i.getState(),0!==n||s in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++o,i.load())}},Tn=class extends I{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){hn(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&hn(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)x(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==l&&this.listenerKeys.push(y(t,Cn,this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}},Sn=class extends Tn{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",s=void 0!==t.collapseLabel?t.collapseLabel:"",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const r=void 0!==t.label?t.label:"i";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r,this.label_.className=i):this.label_=r;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(_,this.handleClick_.bind(this),!1);const h=e+" "+Qe+" "+$e+(this.collapsed_&&this.collapsible_?" "+Je:"")+(this.collapsible_?"":" ol-uncollapsible"),l=this.element;l.className=h,l.appendChild(this.toggleButton_),l.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),n=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!r(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Je),this.collapsed_?an(this.collapseLabel_,this.label_):an(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},An=class extends Tn{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(_,this.handleClick_.bind(this),!1);const r=e+" "+Qe+" "+$e,a=this.element;a.className=r,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ye)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:ue}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(Ye);t||0!==n?t&&0!==n&&this.element.classList.remove(Ye):this.element.classList.add(Ye)}this.label_.style.transform=t}this.rotation_=n}},Dn=class extends Tn{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",s=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",r=void 0!==t.zoomOutLabel?t.zoomOutLabel:"",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",h=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=i,l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof o?document.createTextNode(o):o),l.addEventListener(_,this.handleClick_.bind(this,n),!1);const c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=h,c.appendChild("string"==typeof r?document.createTextNode(r):r),c.addEventListener(_,this.handleClick_.bind(this,-n),!1);const d=e+" "+Qe+" "+$e,u=this.element;u.className=d,u.appendChild(l),u.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:ue})):e.setZoom(i)}}},Nn="active";function On(t,e,n,i){const s=t.getZoom();if(void 0===s)return;const o=t.getConstrainedZoom(s+e),r=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:r,anchor:n,duration:void 0!==i?i:250,easing:ue})}const Fn=class extends I{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Nn)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Nn,t)}setMap(t){this.map_=t}},kn=class extends Fn{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==fn.DBLCLICK){const n=t.originalEvent,i=t.map,s=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;On(i.getView(),o,s,this.duration_),n.preventDefault(),e=!0}return!e}};function zn(t){const e=t.length;let n=0,i=0;for(let s=0;s<e;s++)n+=t[s].clientX,i+=t[s].clientY;return{clientX:n/e,clientY:i/e}}const Kn=class extends Fn{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==fn.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==fn.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==fn.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==fn.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function Vn(t){const e=arguments;return function(t){let n=!0;for(let i=0,s=e.length;i<s&&(n=n&&e[i](t),n);++i);return n}}const Zn=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Gn=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},jn=a,Bn=function(t){const e=t.originalEvent;return 0==e.button&&!(nn&&sn&&e.ctrlKey)},qn=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Un=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Hn=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},Xn=function(t){const e=t.originalEvent;return N(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},Wn=function(t){const e=t.originalEvent;return N(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button},Yn=class extends Kn{constructor(t){super({stopDown:h}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Vn(qn,Wn);this.condition_=t.onFocusOnly?Vn(Gn,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,i=e.getEventPixel(zn(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map.getView();s=e,o=n.getResolution(),s[0]*=o,s[1]*=o,Kt(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();var s,o;this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),s=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(s),r=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(i),o[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(r),duration:500,easing:ue})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Qn=class extends Kn{constructor(t){t=t||{},super({stopDown:h}),this.condition_=t.condition?t.condition:Zn,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!Xn(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===ce)return;const i=e.getSize(),s=t.pixel,o=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){return!Xn(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!Xn(t)&&(!(!Bn(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}},$n=class extends i{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Ke([n])}getGeometry(){return this.geometry_}};class Jn extends t{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}const ti=class extends Kn{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new $n(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Bn,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],s=n[1]-e[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Jn("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Jn(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Jn("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}},ei=class extends ti{constructor(t){super({condition:(t=t||{}).condition?t.condition:Un,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),s=e.getResolution()/i;n=n.clone(),n.scale(s*s)}e.fitInternal(n,{duration:this.duration_,easing:ue})}},ni="ArrowLeft",ii="ArrowRight",si="ArrowDown",oi=class extends Fn{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return qn(t)&&Hn(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==p){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==si||i==ni||i==ii||"ArrowUp"==i)){const s=t.map.getView(),o=s.getResolution()*this.pixelDelta_;let r=0,a=0;i==si?a=-o:i==ni?r=-o:i==ii?r=o:a=o;const h=[r,a];Kt(h,s.getRotation()),function(t,e,n){const i=t.getCenterInternal();if(i){const s=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:_e,center:t.getConstrainedCenter(s)})}}(s,h,this.duration_),n.preventDefault(),e=!0}}return!e}},ri=class extends Fn{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!function(t){const e=t.originalEvent;return sn?e.metaKey:e.ctrlKey}(t)&&Hn(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==p||t.type==m){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&("+"===i||"-"===i)){const s=t.map,o="+"===i?this.delta_:-this.delta_;On(s.getView(),o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}},ai=class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const s=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},hi=class extends Fn{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:jn;this.condition_=t.onFocusOnly?Vn(Gn,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==v)return!0;const e=t.map,n=t.originalEvent;let i;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==v&&(i=n.deltaY,en&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=on),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)),0===i)return!1;this.lastDelta_=i;const s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-i/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=i;const r=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),r),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-gt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),On(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},li=class extends Kn{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=h),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=s;const o=t.map,r=o.getView();r.getConstraints().rotation!==ce&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(zn(this.targetPointers))),this.rotating_&&(o.render(),r.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},ci=class extends Kn{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=h),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],s=n.clientX-i.clientX,o=n.clientY-i.clientY,r=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/r),this.lastDistance_=r;const a=t.map,h=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(zn(this.targetPointers))),a.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function di(t){return t[0]>0&&t[1]>0}function ui(t){t instanceof Ue?t.setMapInternal(null):t instanceof _n&&t.getLayers().forEach(ui)}function gi(t,e){if(t instanceof Ue)t.setMapInternal(e);else if(t instanceof _n){const n=t.getLayers().getArray();for(let t=0,i=n.length;t<i;++t)gi(n[t],e)}}new class extends I{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new _n({layers:t.layers});let s,o,r;return n[wn]=i,n[bn]=t.target,n[Ln]=t.view instanceof Be?t.view:new Be,void 0!==t.controls&&(Array.isArray(t.controls)?s=new D(t.controls.slice()):(N("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),s=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new D(t.interactions.slice()):(N("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new D(t.overlays.slice()):(N("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),r=t.overlays):r=new D,{controls:s,interactions:o,keyboardEventTarget:e,overlays:r,values:n}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:on,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||function(t){t=t||{};const e=new D;return(void 0===t.zoom||t.zoom)&&e.push(new Dn(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new An(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new Sn(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new D,n=new ai(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new Qn),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new kn({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new Yn({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new li),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new ci({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new oi),e.push(new ri({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new hi({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new ei({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Pn(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(wn,this.handleLayerGroupChanged_),this.addChangeListener(Ln,this.handleViewChanged_),this.addChangeListener(Rn,this.handleSizeChanged_),this.addChangeListener(bn,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof Be||t.view.then((function(t){n.setView(new Be(t))})),this.controls.addEventListener(P,(t=>{t.element.setMap(this)})),this.controls.addEventListener(T,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(P,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(T,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(P,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(T,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){gi(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),s=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:a,r=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,r,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];return function e(n){n.forEach((function(n){n instanceof _n?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:a,s=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n=this.getSize(),i=e.width/n[0],s=e.height/n[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/i,(o.clientY-e.top)/s]}getTarget(){return this.get(bn)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Jt(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?O(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(wn)}setLayers(t){const e=this.getLayerGroup();if(t instanceof D)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const s=n.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=te(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?O(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Rn)}getView(){return this.get(Ln)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return function(t,e,n,i,s){if(!t||!(n in t.wantedTiles))return Mn;if(!t.wantedTiles[n][e.getKey()])return Mn;const o=t.viewState.center,r=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(s)+Math.sqrt(r*r+a*a)/s}(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new mn(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===vn||n===v||n===p){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()===this&&i.getActive()&&this.getTargetElement()&&(!i.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[0]||e[1]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(Ct)&&this.renderer_.dispatchRenderEvent(Ct,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new pn(En,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new pn(xn,this,t))));const n=this.postRenderFunctions_;for(let e=0,i=n.length;e<i;++e)n[e](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)x(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(g,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(v,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,hn(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new cn(this)),this.mapBrowserEventHandler_=new yn(this,this.moveTolerance_);for(const t in fn)this.mapBrowserEventHandler_.addEventListener(fn[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(g,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(v,this.boundHandleBrowserEvent_,!!rn&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[y(t,p,this.handleBrowserEvent,this),y(t,m,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(x(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(x(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=y(t,e,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=y(t,u,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(x),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new dn("addlayer",t)),this.layerGroupPropertyListenerKeys_=[y(t,e,this.render,this),y(t,u,this.render,this),y(t,"addlayer",this.handleLayerAdd_,this),y(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){ui(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let s=null;if(void 0!==e&&di(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:U(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:i,wantedTiles:{},mapId:L(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=U(o.nextCenter,o.nextResolution,t,e)}}var o,r;this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Q(this.previousExtent_)&&!G(s.extent,this.previousExtent_))&&(this.dispatchEvent(new pn("movestart",this,i)),this.previousExtent_=Z(this.previousExtent_)),this.previousExtent_&&!s.viewHints[0]&&!s.viewHints[1]&&!G(s.extent,this.previousExtent_)&&(this.dispatchEvent(new pn("moveend",this,s)),o=s.extent,(r=this.previousExtent_)?(r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3]):o.slice())),this.dispatchEvent(new pn(Cn,this,s)),this.renderComplete_=this.hasListener(xn)||this.hasListener(En)||this.hasListener(Ct)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new dn("removelayer",e)),this.set(wn,t)}setSize(t){this.set(Rn,t)}setTarget(t){this.set(bn,t)}setView(t){if(!t||t instanceof Be)return void this.set(Ln,t);this.set(Ln,new Be);const e=this;t.then((function(t){e.setView(new Be(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),s=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(s)||(e=[i,s],!di(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Gt("No map visible because the map container's width or height are 0."))}const n=this.getSize();!e||n&&r(e,n)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}}})()})();